
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rencana Diet Puasa Intermiten</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: url('images/foto1.jpg') no-repeat center center fixed;
      background-size: cover;
      background-color: #ffe6f0;
      color: #4b004b;
      padding: 20px;
      margin: 0;
    }

    h1 {
      text-align: center;
      color: #d63384;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 15px;
      border-radius: 10px;
      font-size: 1.5em;
    }

    .section {
      margin: 20px 0;
      background: rgba(255,255,255,0.9);
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(214, 51, 132, 0.2);
    }

    .photo-gallery {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 10px;
    }

    .photo-gallery img {
      width: 45%;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
      object-fit: cover;
    }

    .photo-gallery img:hover {
      transform: scale(1.05);
    }

    .love-quote {
      text-align: center;
      font-style: italic;
      color: #b30059;
      margin-top: 15px;
      font-size: 1em;
      animation: fadeIn 3s ease;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    canvas {
      max-width: 100%;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 8px;
      border: 1px solid #f3c4d6;
      text-align: center;
      font-size: 14px;
    }

    th {
      background-color: #ffb6c1;
      color: #4b004b;
    }

    input[type="checkbox"] {
      transform: scale(1.2);
      accent-color: #d63384;
    }

    @media (max-width: 768px) {
      table, thead, tbody, th, td, tr {
        display: block;
      }

      thead {
        display: none;
      }

      tr {
        margin-bottom: 1.5em;
        background: rgba(255,255,255,0.85);
        padding: 10px;
        border-radius: 10px;
      }

      td {
        display: flex;
        justify-content: space-between;
        padding: 8px 10px;
        border: none;
        border-bottom: 1px solid #f3c4d6;
      }

      td::before {
        content: attr(data-label);
        font-weight: bold;
        color: #d63384;
      }
    }
  
    .table-container {
      background-color: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(8px);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
      overflow-x: auto;
      margin-top: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      color: #2c003e;
    }

    th, td {
      background-color: transparent;
      color: #2c003e;
    }

</style>
</head>
<body>

<audio autoplay loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6b4eaf2242.mp3" type="audio/mpeg" />
</audio>

<h1>üíñ Rencana Diet Puasa Intermiten 5 Bulan üíñ</h1>

<!-- Galeri Mesra -->
<div class="section">
  <strong>üíë Momen Kita Berdua</strong>
  <div class="photo-gallery">
    <img src="images/foto1.jpg" alt="Foto 1" />
    <img src="images/foto2.jpg" alt="Foto 2" />
    <img src="images/foto3.jpg" alt="Foto 3" />
    <img src="images/foto4.jpg" alt="Foto 4" />
  </div>
  <p class="love-quote">"Menjalani hari bersama orang tersayang, itulah kekuatan terbesar dalam menjaga tubuh dan hati tetap sehat."</p>
</div>

<!-- Notifikasi -->
<div class="section">
  <strong>üîî Pengingat Harian</strong>
  <div id="notification-settings">
    <label for="notifTime">Jam Pengingat:</label>
    <input type="time" id="notifTime" value="07:00" />
    <button onclick="setReminder()">Aktifkan</button>
  </div>
</div>

<!-- Progress Lingkaran -->
<div class="section">
  <strong>üìä Total Progress</strong>
  <canvas id="totalProgressChart" width="150" height="150"></canvas>
</div>

<!-- Grafik Mingguan -->
<div class="section">
  <strong>üìà Progress Mingguan</strong>
  <canvas id="weeklyChart"></canvas>
</div>

<!-- Tabel Checklist -->
<div class="table-container">
<table>
  <thead>
    <tr>
      <th>Minggu</th>
      <th>Puasa:Makan</th>
      <th>Motivasi</th>
      <th>Sen</th><th>Sel</th><th>Rab</th><th>Kam</th><th>Jum</th><th>Sab</th><th>Min</th>
    </tr>
  </thead>
  <tbody id="tabelPuasa"></tbody>
</table>
</div>

<script>
  const motivasi = [
    "Mulai pelan-pelan, dengarkan tubuhmu.","Tubuh mulai beradaptasi, tetap hidrasi.","Sel mulai memperbaiki diri (autofagi).",
    "Nikmati energi lebih stabil sepanjang hari.","Lemak mulai digunakan lebih efisien.","Kamu sudah terbiasa, pertahankan!",
    "Kendalikan nafsu makan, bukan sebaliknya.","Tingkatkan kualitas tidur dan olahraga ringan.","Selamat datang di zona pembakaran lemak optimal.",
    "Kamu jadi lebih sadar terhadap rasa lapar sejati.","Lebih fokus, lebih jernih berpikir.","Coba makan makanan utuh & bernutrisi.",
    "Jendela makan makin sempit, tapi kamu kuat.","Kamu sudah seperti atlet metabolik!","Tubuhmu sedang regenerasi maksimal.",
    "Kamu sudah ahli dalam kendali diri.","Hanya makan sekali, buat itu bernutrisi.","Tubuh lebih ringan, pikiran pun tenang.",
    "Pertahankan pola sehat ini dengan bangga.","Finish strong! Kamu berhasil 5 bulan penuh!"
  ];

  const hari = ["Sen", "Sel", "Rab", "Kam", "Jum", "Sab", "Min"];
  const tbody = document.getElementById("tabelPuasa");

  function getFastingHours(week) {
    if (week < 2) return "12:12";
    if (week < 4) return "14:10";
    if (week < 8) return "16:8";
    if (week < 12) return "18:6";
    if (week < 16) return "20:4";
    return "23:1";
  }

  function createCheckbox(week, day) {
    const id = `week${week}_day${day}`;
    const saved = localStorage.getItem(id) === 'true';
    return `<input type="checkbox" id="${id}" ${saved ? 'checked' : ''} onchange="saveCheck('${id}')">`;
  }

  function saveCheck(id) {
    const checkbox = document.getElementById(id);
    localStorage.setItem(id, checkbox.checked);
    updateCharts();
  }

  for (let i = 0; i < 20; i++) {
    let row = `<tr>
      <td data-label="Minggu">Minggu ${i + 1}</td>
      <td data-label="Puasa:Makan">${getFastingHours(i)}</td>
      <td data-label="Motivasi">${motivasi[i]}</td>`;
    for (let d = 0; d < 7; d++) {
      row += `<td data-label="${hari[d]}">${createCheckbox(i + 1, d)}</td>`;
    }
    row += `</tr>`;
    tbody.innerHTML += row;
  }

  function getProgressData() {
    let total = 0;
    let weekly = Array(20).fill(0);
    for (let i = 1; i <= 20; i++) {
      for (let d = 0; d < 7; d++) {
        const id = `week${i}_day${d}`;
        if (localStorage.getItem(id) === 'true') {
          total++;
          weekly[i - 1]++;
        }
      }
    }
    return { total, weekly };
  }

  let donutChart, barChart;

  function updateCharts() {
    const { total, weekly } = getProgressData();
    const percent = Math.round((total / 140) * 100);

    if (donutChart) donutChart.destroy();
    donutChart = new Chart(document.getElementById("totalProgressChart"), {
      type: "doughnut",
      data: {
        labels: ["Selesai", "Belum"],
        datasets: [{
          data: [total, 140 - total],
          backgroundColor: ["#d63384", "#f3c4d6"]
        }]
      },
      options: {
        plugins: {
          tooltip: { enabled: false },
          legend: { display: false },
          title: { display: true, text: percent + "% selesai", color: "#4b004b" }
        },
        cutout: "70%",
      }
    });

    if (barChart) barChart.destroy();
    barChart = new Chart(document.getElementById("weeklyChart"), {
      type: "bar",
      data: {
        labels: Array.from({ length: 20 }, (_, i) => `Minggu ${i + 1}`),
        datasets: [{
          label: "Hari berhasil",
          data: weekly,
          backgroundColor: "#ffb6c1"
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true, max: 7 }
        }
      }
    });
  }

  updateCharts();

  // Notifikasi pengingat
  const notifInput = document.getElementById("notifTime");
  notifInput.value = localStorage.getItem("notifTime") || "07:00";

  function setReminder() {
    const time = notifInput.value;
    localStorage.setItem("notifTime", time);
    if ("Notification" in window) {
      Notification.requestPermission().then(perm => {
        if (perm === "granted") {
          const [h, m] = time.split(":").map(Number);
          const now = new Date();
          const target = new Date();
          target.setHours(h, m, 0, 0);
          if (now > target) target.setDate(target.getDate() + 1);
          const delay = target - now;
          setTimeout(() => {
            new Notification("‚è∞ Waktunya puasa hari ini! Semangat!");
          }, delay);
          alert("Notifikasi akan muncul setiap hari jam " + time);
        }
      });
    }
  }
</script>

</body>
</html>
